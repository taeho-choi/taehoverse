# 태호버스 (HTML/CSS/JavaScript/Firebase)


### 지원 플랫폼

- PC

### 프로젝트 소개

- 배포 링크 : [https://taeho-choi.github.io/taehoverse/](https://taeho-choi.github.io/taehoverse/)
- 개발 기간 : 2022-04 ~ 2022.05
- HTML5 Canvas를 사용하여 만든 플랫포머 메타버스 프로젝트입니다.
- JavaScript로 물리적 움직임과 키보드 입력, 상호작용 등을 구현하였습니다.
- Firebase 서비스를 이용해 멀티플레이 기능을 구현하였습니다.
- 모든 픽셀 아트 리소스를 Aseprite 툴을 사용해 자체제작 하였습니다.

### 시연 영상

https://youtu.be/q8MeP0kf7FA

# 기획 내용


기존 포트폴리오 홈페이지를 메타버스화 하는 것을 목표로 하였습니다. 제 포트폴리오를 열람하시는 분들이 게임처럼 제 공간을 돌아다니며 구경할 수 있는 웹사이트를 만들고 싶었습니다.

물리 동작들과 카메라 이동은 “메이플스토리”를 모티브로 하였습니다. 

서버는 접근성을 고려하여 Firebase의 익명 로그인 기능으로 회원가입 없이 입장 시 자동 회원가입과 로그인이 되게 하였습니다.

마우스 입력

`좌클릭 : 버튼 기능 동작 (닉네임 변경, 웹사이트로 이동)`

키보드 입력

`a,d(←,→) : 캐릭터 좌/우 이동`

`spacebar : 캐릭터 점프`

`f : 상호작용`

`enter : 채팅 입력/취소`

# 구현 내용


- HTML 5 Canvas를 사용하여 기본 화면을 구성하였습니다.
- requestAnimationFrame 함수로 매 프레임 화면을 그리게 하였습니다.
- addEventListener 함수로 키보드 입력을 받았습니다.
- 키보드 입력에 따라 캐릭터의 상태가 변하고, 그 상태에 따라 다른 애니메이션 이미지를 그리게 하였습니다. (idle, walk, jump)
- 이동 입력 시 캐릭터 클래스에 전달된 velocity 인자값에 따른 좌표 이동을 구현하였습니다.
- 캐릭터가 플랫폼에서 떨어져 있을 경우 중력가속도를 적용하였습니다.
- Canvas context의 translate 함수를 사용하여 캐릭터를 따라오는 카메라의 시차 이동을 구현하였습니다.
- 배경 이미지의 이동은 기본 카메라와 별개로 구현하고, 이동 값을 카메라보다 적게 적용하여 원근감을 주었습니다.
- 2차원 배열로 타일맵 데이터를 초기화하고, 이에 따라 맵이 그려지게 하였습니다.
- 상호작용 요소가 있는 타일에 캐릭터가 위치하면 F 키보드 입력 이벤트가 가능하도록 하였습니다.

- Firebase의 Realtime Database를 사용하여 실시간 멀티플레이를 구현하였습니다.
- signInAnonymously 함수를 사용하여 회원가입 없는 익명 로그인 기능을 구현하였습니다.
- 캐릭터의 상태 변화를 판단하는 dataChangeFlag 변수를 활용하여 서버에 데이터를 보내는 빈도를 최소화하였습니다.
- DB의 용량을 줄이기 위하여 채팅 로그는 클라이언트에만 기록하게 하였습니다.
- 닉네임 변경 시 DB update 함수를 실행하여 즉시 바뀌도록 하였습니다.
